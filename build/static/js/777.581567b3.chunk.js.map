{"version":3,"file":"static/js/777.581567b3.chunk.js","mappings":"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","sources":["pages/ledger/ledgerUtils.jsx","pages/ledger/LedgerTable.jsx","pages/ledger/ledgerStatsUpdater.jsx","pages/ledger/LedgerControls.jsx","pages/ledger/Ledger.jsx"],"sourcesContent":["// ledgerUtils.js\r\nexport const API_BASE = \"http://localhost:8000/api/v2\"; // replace with your backend URL\r\n\r\n// Numeric columns\r\nexport const numericCols = [\r\n  \"balBf\", \"acc\", \"food\", \"bar\", \"laundry\", \"swimming\",\r\n  \"roomHire\", \"other\", \"tCharge\", \"usdSwipe\", \"ecoCash\",\r\n  \"zigSwipe\", \"cash\", \"tLedger\", \"bankTr\", \"balCf\"\r\n];\r\n\r\n// All columns\r\nexport const allCols = [\r\n  \"folio\", \"guestName\", \"pax\",\r\n  ...numericCols\r\n];\r\n\r\n// Default row generator\r\nexport function defaultRow(idx = 0) {\r\n  const row = { id: null, row: idx + 1, _saveStatus: \"new\" };\r\n  allCols.forEach(col => {\r\n    row[col] = numericCols.includes(col) ? 0 : \"\";\r\n  });\r\n  return row;\r\n}\r\n\r\n// Safely convert to number\r\nexport function toNumber(val) {\r\n  const n = parseFloat(val);\r\n  return isNaN(n) ? 0 : n;\r\n}\r\n\r\n// Format number nicely\r\nexport function fmt(val) {\r\n  return (val ?? 0).toLocaleString(undefined, {\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2\r\n  });\r\n}\r\n\r\n// Convert to YYYY-MM-DD\r\nexport function isoDate(d) {\r\n  // Ensure we are working with a date object\r\n  let date = new Date(d);\r\n  \r\n  // Handle case where date string might not specify time zone, forcing UTC midnight to avoid local time shifts\r\n  if (typeof d === 'string' && !d.includes('T')) {\r\n     date = new Date(d + 'T00:00:00');\r\n  }\r\n\r\n  const yyyy = date.getFullYear();\r\n  const mm = String(date.getMonth() + 1).padStart(2, \"0\");\r\n  const dd = String(date.getDate()).padStart(2, \"0\");\r\n  return `${yyyy}-${mm}-${dd}`;\r\n}\r\n\r\n// Get next date string\r\nexport function nextISODate(dateStr) {\r\n  // Use T00:00:00 to treat the date as local midnight and avoid time zone issues\r\n  const d = new Date(dateStr + 'T00:00:00'); \r\n  d.setDate(d.getDate() + 1);\r\n  return isoDate(d);\r\n}\r\n\r\n// ðŸ”¥ Get previous date string (REQUIRED FOR addNewDateAutoBackward)\r\nexport function prevISODate(dateStr) {\r\n  // Use T00:00:00 to treat the date as local midnight and avoid time zone issues\r\n  const d = new Date(dateStr + 'T00:00:00'); \r\n  d.setDate(d.getDate() - 1);\r\n  return isoDate(d);\r\n}","import React from \"react\";\r\nimport { numericCols, fmt } from \"./ledgerUtils\";\r\n\r\nexport default function LedgerTable({\r\n  derivedRows = [],\r\n  cashAccounts = {},\r\n  currentDate,\r\n  setCellValue,\r\n  setCashValue,\r\n  cashTotals = {},\r\n  totals = {},\r\n  debtorsInRes = 0,\r\n  inputRefs,\r\n  onSaveRow,\r\n}) {\r\n  const displayNumericOrder = [\r\n    \"balBf\", \"acc\", \"food\", \"bar\", \"laundry\", \"swimming\",\r\n    \"roomHire\", \"other\", \"tCharge\", \"usdSwipe\", \"ecoCash\",\r\n    \"zigSwipe\", \"cash\", \"tLedger\", \"bankTr\",\r\n  ];\r\n\r\n  const Header = ({ title }) => (\r\n    <th><span dangerouslySetInnerHTML={{ __html: title }} /></th>\r\n  );\r\n\r\n  const cash = cashAccounts[currentDate] || Object.fromEntries(displayNumericOrder.map((c) => [c, 0]));\r\n\r\n  return (\r\n    <div className=\"ledger-table-wrap\">\r\n      <table className=\"ledger-table\">\r\n        {/* âœ… FIXED: Widths now sum exactly to 100% */}\r\n        <colgroup>\r\n          <col style={{ width: \"2%\" }} />  {/* # */}\r\n          <col style={{ width: \"5%\" }} />  {/* Folio (Increased) */}\r\n          <col style={{ width: \"13%\" }} /> {/* Name (Increased) */}\r\n          <col style={{ width: \"4%\" }} />  {/* Pax (Increased) */}\r\n          <col style={{ width: \"5%\" }} />  {/* Bal Bf */}\r\n          \r\n          {/* 7 columns x 4% = 28% */}\r\n          <col style={{ width: \"4%\" }} /> {/* Acc */}\r\n          <col style={{ width: \"4%\" }} /> {/* Food */}\r\n          <col style={{ width: \"4%\" }} /> {/* Bar */}\r\n          <col style={{ width: \"4%\" }} /> {/* Lndry */}\r\n          <col style={{ width: \"4%\" }} /> {/* Swim */}\r\n          <col style={{ width: \"4%\" }} /> {/* Room */}\r\n          <col style={{ width: \"4%\" }} /> {/* Oth */}\r\n\r\n          {/* 8 columns x 5% = 40% */}\r\n          <col style={{ width: \"5%\" }} /> {/* T Chrg */}\r\n          <col style={{ width: \"5%\" }} /> {/* USD */}\r\n          <col style={{ width: \"5%\" }} /> {/* Eco */}\r\n          <col style={{ width: \"5%\" }} /> {/* Zig */}\r\n          <col style={{ width: \"5%\" }} /> {/* Cash */}\r\n          <col style={{ width: \"5%\" }} /> {/* Ledg */}\r\n          <col style={{ width: \"5%\" }} /> {/* Bank */}\r\n          <col style={{ width: \"5%\" }} /> {/* Bal CF */}\r\n          \r\n          <col style={{ width: \"3%\" }} /> {/* Act */}\r\n        </colgroup>\r\n\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Folio</th>\r\n            <th>Guest Name</th>\r\n            <th>Pax</th>\r\n            <Header title=\"Bal<br/>B/F\" />\r\n            <Header title=\"Acc\" />\r\n            <Header title=\"Food\" />\r\n            <Header title=\"Bar\" />\r\n            <Header title=\"Lndry\" />\r\n            <Header title=\"Pool\" />\r\n            <Header title=\"Room\" />\r\n            <Header title=\"Other\" />\r\n            <Header title=\"Total<br/>Chrg\" />\r\n            <Header title=\"USD<br/>Swp\" />\r\n            <Header title=\"Eco\" />\r\n            <Header title=\"ZIG\" />\r\n            <Header title=\"Cash\" />\r\n            <Header title=\"Ledg\" />\r\n            <Header title=\"Bank\" />\r\n            <Header title=\"Bal<br/>C/F\" />\r\n            <th>ðŸ’¾</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {derivedRows.map((r, ri) => (\r\n            <tr key={ri}>\r\n              <td style={{textAlign: 'center', color: '#666'}}>{r.row}</td>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  value={r.folio || \"\"}\r\n                  onChange={(e) => setCellValue(ri, \"folio\", e.target.value)}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  ref={(el) => (inputRefs.current[`${ri}-guestName`] = el)}\r\n                  value={r.guestName || \"\"}\r\n                  onChange={(e) => setCellValue(ri, \"guestName\", e.target.value)}\r\n                />\r\n              </td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  style={{textAlign: 'center'}}\r\n                  value={r.pax || \"\"}\r\n                  onChange={(e) => setCellValue(ri, \"pax\", e.target.value)}\r\n                />\r\n              </td>\r\n\r\n              {displayNumericOrder.map((f) => (\r\n                <td key={f}>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    placeholder=\"-\"\r\n                    value={r[f] === 0 ? \"\" : r[f]} // Hide 0s for cleaner look\r\n                    onChange={(e) => setCellValue(ri, f, e.target.value)}\r\n                  />\r\n                </td>\r\n              ))}\r\n\r\n              <td style={{textAlign: 'right', paddingRight: '4px', fontWeight: 'bold', color: r.balCf < 0 ? 'red' : 'inherit'}}>\r\n                {fmt(r.balCf)}\r\n              </td>\r\n\r\n              <td>\r\n                <button\r\n                  className={`save-row-btn ${r._saveStatus === \"saved\" ? \"saved\" : \"\"}`}\r\n                  onClick={() => onSaveRow(ri)}\r\n                  title=\"Save Row\"\r\n                >\r\n                  {r._saveStatus === \"saved\" ? \"âœ…\" : \"ðŸ’¾\"}\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n\r\n          {/* CASH ROW */}\r\n          <tr className=\"cash-row\">\r\n            <td colSpan={4} style={{textAlign: 'right', paddingRight: '10px'}}>CASH ACC</td>\r\n            {displayNumericOrder.map((f) => (\r\n              <td key={f}>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={cash[f] === 0 ? \"\" : cash[f]}\r\n                  onChange={(e) => setCashValue(f, e.target.value)}\r\n                />\r\n              </td>\r\n            ))}\r\n            <td style={{textAlign: 'right', paddingRight: '4px'}}>{fmt(cashTotals.balCf)}</td>\r\n            <td></td>\r\n          </tr>\r\n\r\n          {/* TOTALS ROW */}\r\n          <tr className=\"totals-row\">\r\n            <td colSpan={4} style={{textAlign: 'right', paddingRight: '10px'}}>TOTALS</td>\r\n            {displayNumericOrder.map((f) => (\r\n              <td key={f} style={{textAlign: 'right', paddingRight: '4px'}}>{fmt(totals[f])}</td>\r\n            ))}\r\n            <td style={{textAlign: 'right', paddingRight: '4px'}}>{fmt(totals.balCf)}</td>\r\n            <td></td>\r\n          </tr>\r\n\r\n          {/* DEBTORS ROW */}\r\n          <tr className=\"debtors-row\">\r\n            <td colSpan={21}>\r\n              Debtors in Residence: <span style={{color: 'var(--pumpkin)', fontWeight: 'bold'}}>{fmt(debtorsInRes)}</span>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      <div style={{height: '80px'}}></div> {/* Scroll padding */}\r\n    </div>\r\n  );\r\n}","// LedgerStatsUpdater.jsx\r\n// This updates ledger_stats for 33 fields (16 total_*, 16 cash_*, 1 debtors_in_res)\r\n\r\nexport default async function LedgerStatsUpdater(\r\n  axiosInstance,\r\n  date,\r\n  cashTotals,\r\n  totals,\r\n  debtorsInRes\r\n) {\r\n  try {\r\n    // Fetch existing stats for this date\r\n    const res = await axiosInstance.get(`/ledger_stats/?date=${date}`);\r\n    const existing = Array.isArray(res.data) && res.data.length ? res.data[0] : null;\r\n\r\n    // Prepare payload\r\n    const payload = { date, debtors_in_res: debtorsInRes };\r\n\r\n    // Add cash_* fields\r\n    Object.keys(cashTotals).forEach((k) => {\r\n      if (k.startsWith(\"cash_\") || k === \"tCharge\" || k === \"balCf\") {\r\n        payload[k] = cashTotals[k] ?? 0;\r\n      }\r\n    });\r\n\r\n    // Add total_* fields\r\n    Object.keys(totals).forEach((k) => {\r\n      if (k.startsWith(\"total_\") || k === \"tCharge\" || k === \"balCf\") {\r\n        payload[k] = totals[k] ?? 0;\r\n      }\r\n    });\r\n\r\n    if (existing) {\r\n      // Update only if something changed\r\n      const needsUpdate = Object.keys(payload).some(\r\n        (k) => Number(existing[k]) !== Number(payload[k])\r\n      );\r\n      if (needsUpdate) {\r\n        await axiosInstance.put(`/ledger_stats/${existing.id}/`, payload);\r\n        console.log(\"Ledger stats updated for date:\", date);\r\n      }\r\n    } else {\r\n      // Create if doesn't exist\r\n      await axiosInstance.post(\"/ledger_stats/\", payload);\r\n      console.log(\"Ledger stats created for date:\", date);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"LedgerStatsUpdater error:\", err);\r\n  }\r\n}\r\n","// LedgerControls.jsx\r\nimport React from \"react\";\r\n\r\nexport default function LedgerControls({\r\n  dates,\r\n  visibleDates,\r\n  visibleStartIndex,\r\n  currentDateIndex,\r\n  prevDate,\r\n  nextDate,\r\n  selectDate,\r\n  addNewDateAuto,\r\n  addNewDateAutoBackward,\r\n  resetViewToLatestDate, // ðŸ”¥ RECEIVE NEW FUNCTION\r\n  handleManualDateChange,\r\n  addRow,\r\n  saveAll,\r\n  savingAll\r\n}) {\r\n  const getRealIndex = (visibleIndex) => visibleStartIndex + visibleIndex;\r\n\r\n  return (\r\n    <div className=\"ledger-bottom-bar\">\r\n      <div className=\"date-nav-bar\">\r\n        {/* Existing navigation buttons */}\r\n        <button onClick={prevDate} disabled={currentDateIndex <= 0}>â—€</button>\r\n\r\n        <div className=\"date-tabs\">\r\n          {/* Button for creating previous dates */}\r\n          <button \r\n            className=\"date-tab minus\" \r\n            onClick={addNewDateAutoBackward} \r\n            title=\"Add previous day\"\r\n          >\r\n            âž–\r\n          </button>\r\n          \r\n          {/* Map only the visible dates */}\r\n          {visibleDates.map((d, i) => {\r\n            const realIndex = getRealIndex(i);\r\n            const isActive = realIndex === currentDateIndex;\r\n\r\n            return (\r\n              <button\r\n                key={d}\r\n                className={`date-tab ${isActive ? \"active\" : \"\"}`}\r\n                onClick={() => selectDate(realIndex)}\r\n              >\r\n                {d}\r\n              </button>\r\n            );\r\n          })}\r\n          {/* Button for creating next dates */}\r\n          <button className=\"date-tab plus\" onClick={addNewDateAuto} title=\"Add next day\">ï¼‹</button>\r\n        </div>\r\n\r\n        <button\r\n          onClick={nextDate}\r\n          disabled={currentDateIndex >= dates.length - 1}\r\n        >\r\n          â–¶\r\n        </button>\r\n\r\n        {/* Manual date picker */}\r\n        <div className=\"manual-date-filter\">\r\n          <input type=\"date\" onChange={handleManualDateChange} />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"actions\">\r\n        {/* ðŸ”¥ NEW RESET BUTTON */}\r\n        <button \r\n          className=\"btn primary\" \r\n          onClick={resetViewToLatestDate}\r\n          title=\"Go back to the latest recorded date and clear extra tabs\"\r\n        >\r\n          ðŸ“… Reset View\r\n        </button>\r\n        {/* ------------------- */}\r\n        <button className=\"btn\" onClick={addRow}>âž• Add row</button>\r\n        <button className=\"btn outline\" onClick={saveAll} disabled={savingAll}>\r\n          {savingAll ? \"Saving...\" : \"Save All\"}\r\n        </button>\r\n        <button className=\"btn outline\" onClick={() => window.print()}>Print</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useEffect, useMemo, useRef, useState } from \"react\";\r\n// We no longer import axios directly, we use our central 'api' tool\r\nimport api from \"../../api/api\"; \r\nimport LedgerTable from \"./LedgerTable\";\r\nimport LedgerStatsUpdater from \"./ledgerStatsUpdater\";\r\nimport {\r\n  API_BASE,\r\n  numericCols,\r\n  allCols,\r\n  defaultRow,\r\n  toNumber,\r\n  isoDate,\r\n  nextISODate,\r\n  prevISODate,\r\n} from \"./ledgerUtils\";\r\nimport \"../../styles/Ledger.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport LedgerControls from \"./LedgerControls\";\r\n\r\nexport default function Ledger() {\r\n  const navigate = useNavigate();\r\n\r\n  const [dates, setDates] = useState([]);\r\n  const [currentDateIndex, setCurrentDateIndex] = useState(-1);\r\n  const [ledgerByDate, setLedgerByDate] = useState({});\r\n  const [cashAccounts, setCashAccounts] = useState({});\r\n  const [loadingDates, setLoadingDates] = useState(false);\r\n  const [loadingRows, setLoadingRows] = useState(false);\r\n  const [savingAll, setSavingAll] = useState(false);\r\n\r\n  const inputRefs = useRef({});\r\n\r\n  // ---------------------------------------------------------------------------\r\n  // ðŸš€ AUTH LOGIC REMOVED\r\n  // We deleted the local axiosInstance and interceptors here.\r\n  // The 'api' import handles tokens, sessionStorage, and auto-refresh globally.\r\n  // ---------------------------------------------------------------------------\r\n\r\n  const chargeCols = [\r\n    \"acc\",\r\n    \"food\",\r\n    \"bar\",\r\n    \"laundry\",\r\n    \"swimming\",\r\n    \"roomHire\",\r\n    \"other\",\r\n  ];\r\n\r\n  function computeBalCfForRow(row) {\r\n    const tCharge = chargeCols.reduce((s, c) => s + toNumber(row[c]), 0);\r\n    const balCf =\r\n      toNumber(row.tCharge ?? tCharge) +\r\n      toNumber(row.balBf) -\r\n      toNumber(row.bankTr) -\r\n      toNumber(row.tLedger) -\r\n      toNumber(row.cash) -\r\n      toNumber(row.zigSwipe) -\r\n      toNumber(row.ecoCash) -\r\n      toNumber(row.usdSwipe);\r\n    return { tCharge, balCf };\r\n  }\r\n\r\n  async function fetchRowsFromApi(dateStr) {\r\n    try {\r\n      // âœ… Using 'api' instead of axiosInstance\r\n      const res = await api.get(`/ledger/?date=${dateStr}`);\r\n      if (!Array.isArray(res.data) || res.data.length === 0) return [defaultRow(0)];\r\n      return res.data.map((r, idx) => {\r\n        const row = defaultRow(idx);\r\n        allCols.forEach((c) => {\r\n          row[c] =\r\n            r[c] !== undefined && r[c] !== null\r\n              ? r[c]\r\n              : numericCols.includes(c)\r\n              ? 0\r\n              : row[c];\r\n        });\r\n        row.id = r.id ?? null;\r\n        row._saveStatus = \"saved\";\r\n        row.row = idx + 1;\r\n        return row;\r\n      });\r\n    } catch (err) {\r\n      console.error(\"fetchRowsFromApi error:\", err);\r\n      return [defaultRow(0)];\r\n    }\r\n  }\r\n\r\n  async function ensureDateCreatedWithCarry(prevDate, newDate) {\r\n    if (ledgerByDate[newDate] && ledgerByDate[newDate].length) return ledgerByDate[newDate];\r\n    \r\n    let carryRows = [];\r\n\r\n    if (prevDate) {\r\n        let prevRows = [];\r\n        if (ledgerByDate[prevDate] && ledgerByDate[prevDate].length) {\r\n          prevRows = ledgerByDate[prevDate];\r\n        } else {\r\n          prevRows = await fetchRowsFromApi(prevDate);\r\n          setLedgerByDate((prev) => ({ ...prev, [prevDate]: prevRows }));\r\n        }\r\n\r\n        prevRows.forEach((pr) => {\r\n          const { tCharge, balCf } = computeBalCfForRow(pr);\r\n          if (pr.guestName && String(pr.guestName).trim() !== \"\" && Number(balCf) !== 0) {\r\n              const nr = {\r\n                  ...defaultRow(carryRows.length),\r\n                  guestName: pr.guestName,\r\n                  folio: pr.folio ?? \"\",\r\n                  pax: pr.pax ?? 0,\r\n                  balBf: Number(balCf),\r\n                  acc: 0, food: 0, bar: 0, laundry: 0, swimming: 0, roomHire: 0, other: 0, \r\n                  tCharge: 0, usdSwipe: 0, ecoCash: 0, zigSwipe: 0, cash: 0, tLedger: 0, bankTr: 0,\r\n                  balCf: 0,\r\n                  id: null,\r\n                  _saveStatus: \"new\",\r\n                  row: carryRows.length + 1,\r\n              };\r\n              carryRows.push(nr);\r\n          }\r\n        });\r\n    }\r\n\r\n    const initialRows = carryRows.length ? carryRows : [defaultRow(0)];\r\n    \r\n    setLedgerByDate((prev) => ({ ...prev, [newDate]: initialRows }));\r\n    setCashAccounts((prev) => ({\r\n      ...prev,\r\n      [newDate]: Object.fromEntries(numericCols.map((c) => [c, 0])),\r\n    }));\r\n\r\n    return initialRows;\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function loadDates() {\r\n      setLoadingDates(true);\r\n      try {\r\n        // âœ… Using 'api'\r\n        const res = await api.get(\"/ledger_dates/\");\r\n        const list = Array.isArray(res.data) && res.data.length\r\n          ? res.data.map((d) => isoDate(d)).sort()\r\n          : [isoDate(new Date())];\r\n        setDates(list);\r\n        setCurrentDateIndex(list.length - 1);\r\n      } catch {\r\n        const today = isoDate(new Date());\r\n        setDates([today]);\r\n        setCurrentDateIndex(0);\r\n      } finally {\r\n        setLoadingDates(false);\r\n      }\r\n    }\r\n    loadDates();\r\n  }, []);\r\n\r\n  const currentDate = dates[currentDateIndex];\r\n  const rows = ledgerByDate[currentDate] ?? [];\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function ensureRowsFor(dateStr) {\r\n      if (!dateStr) return;\r\n      if (ledgerByDate[dateStr] && ledgerByDate[dateStr].length) return;\r\n      setLoadingRows(true);\r\n      try {\r\n        const fetched = await fetchRowsFromApi(dateStr); \r\n        if (!mounted) return;\r\n        setLedgerByDate((prev) => ({ ...prev, [dateStr]: fetched }));\r\n      } catch {\r\n        setLedgerByDate((prev) => ({ ...prev, [dateStr]: [defaultRow(0)] }));\r\n      } finally {\r\n        if (mounted) setLoadingRows(false);\r\n      }\r\n    }\r\n    ensureRowsFor(currentDate);\r\n    return () => { mounted = false; };\r\n  }, [currentDate]);\r\n\r\n  function setCellValue(index, col, raw) {\r\n    setLedgerByDate((prev) => {\r\n      const copy = { ...prev };\r\n      const arr = [...(copy[currentDate] ?? [])];\r\n      arr[index] = { ...arr[index], [col]: raw };\r\n      copy[currentDate] = arr;\r\n      return copy;\r\n    });\r\n  }\r\n\r\n  function setCashValue(col, raw) {\r\n    setCashAccounts((prev) => {\r\n      const copy = { ...prev };\r\n      const curr = copy[currentDate] || Object.fromEntries(numericCols.map((c) => [c, 0]));\r\n      curr[col] = raw;\r\n      copy[currentDate] = curr;\r\n      return copy;\r\n    });\r\n  }\r\n\r\n  function addRow() {\r\n    setLedgerByDate((prev) => {\r\n      const copy = { ...prev };\r\n      const arr = [...(copy[currentDate] ?? [])];\r\n      arr.push(defaultRow(arr.length));\r\n      arr.forEach((r, i) => (r.row = i + 1));\r\n      copy[currentDate] = arr;\r\n      return copy;\r\n    });\r\n    setTimeout(() => inputRefs.current[`${rows.length}-guestName`]?.focus?.(), 50);\r\n  }\r\n  \r\n  // ðŸ’» UPDATED useMemo LOGIC FOR 2 VISIBLE DATES\r\n  const { visibleDates, visibleStartIndex } = useMemo(() => {\r\n    const maxVisible = 2;\r\n    const totalDates = dates.length;\r\n\r\n    if (totalDates <= maxVisible) {\r\n      return { visibleDates: dates, visibleStartIndex: 0 };\r\n    }\r\n\r\n    let start;\r\n    let end;\r\n    \r\n    if (currentDateIndex === 0) {\r\n        start = 0;\r\n    } \r\n    else if (currentDateIndex === totalDates - 1) {\r\n        start = totalDates - maxVisible;\r\n    }\r\n    else {\r\n        start = Math.max(0, currentDateIndex - (maxVisible - 1));\r\n    }\r\n    \r\n    end = start + maxVisible;\r\n    \r\n    if (end > totalDates) {\r\n        end = totalDates;\r\n        start = end - maxVisible;\r\n    }\r\n\r\n    const visibleDates = dates.slice(start, end);\r\n\r\n    return { visibleDates, visibleStartIndex: start };\r\n  }, [dates, currentDateIndex]);\r\n\r\n  const derivedRows = useMemo(() => {\r\n    return (ledgerByDate[currentDate] ?? []).map((r, idx) => {\r\n      const row = { ...r };\r\n      row.tCharge = chargeCols.reduce((s, c) => s + toNumber(row[c]), 0);\r\n      row.balCf =\r\n        toNumber(row.tCharge) +\r\n        toNumber(row.balBf) -\r\n        toNumber(row.bankTr) -\r\n        toNumber(row.tLedger) -\r\n        toNumber(row.cash) -\r\n        toNumber(row.zigSwipe) -\r\n        toNumber(row.ecoCash) -\r\n        toNumber(row.usdSwipe);\r\n      row.row = idx + 1;\r\n      return row;\r\n    });\r\n  }, [ledgerByDate, currentDate]);\r\n\r\n  const cashTotals = useMemo(() => {\r\n    const cash = cashAccounts[currentDate] || Object.fromEntries(numericCols.map((c) => [c, 0]));\r\n    const tCharge = chargeCols.reduce((sum, c) => sum + toNumber(cash[c]), 0);\r\n    const balCf =\r\n      tCharge +\r\n      toNumber(cash.balBf) -\r\n      toNumber(cash.bankTr) -\r\n      toNumber(cash.tLedger) -\r\n      toNumber(cash.cash) -\r\n      toNumber(cash.zigSwipe) -\r\n      toNumber(cash.ecoCash) -\r\n      toNumber(cash.usdSwipe);\r\n    return { ...cash, tCharge, balCf };\r\n  }, [cashAccounts, currentDate]);\r\n\r\n  const totals = useMemo(() => {\r\n    const t = Object.fromEntries(numericCols.map((c) => [c, 0]));\r\n    t.balCf = 0;\r\n    derivedRows.forEach((r) => {\r\n      numericCols.forEach((c) => (t[c] += toNumber(r[c])));\r\n      t.balCf += toNumber(r.balCf);\r\n    });\r\n    return t;\r\n  }, [derivedRows]);\r\n\r\n  const debtorsInRes = useMemo(\r\n    () =>\r\n      totals.tCharge -\r\n      totals.usdSwipe -\r\n      totals.ecoCash -\r\n      totals.zigSwipe -\r\n      totals.cash -\r\n      totals.tLedger -\r\n      totals.bankTr,\r\n    [totals]\r\n  );\r\n\r\n  async function saveRow(index) {\r\n    const r = derivedRows[index];\r\n    if (!r) return;\r\n    if (!window.confirm(\"Save this row?\")) return;\r\n    try {\r\n      const payload = { id: r.id || null, date: currentDate };\r\n      allCols.forEach((c) => payload[c] = toNumber(r[c]));\r\n      payload.folio = r.folio || \"\";\r\n      payload.guestName = r.guestName || \"\";\r\n      \r\n      // âœ… Using 'api'\r\n      await api.post(\"/ledger/\", payload);\r\n      \r\n      setLedgerByDate((prev) => {\r\n        const copy = { ...prev };\r\n        const arr = [...(copy[currentDate] ?? [])];\r\n        arr[index] = { ...arr[index], _saveStatus: \"saved\" };\r\n        copy[currentDate] = arr;\r\n        return copy;\r\n      });\r\n      // âœ… Pass 'api' to the stats updater\r\n      await LedgerStatsUpdater(api, currentDate, cashTotals, totals, debtorsInRes);\r\n      alert(\"âœ… Row and stats saved!\");\r\n    } catch (err) {\r\n      console.error(\"Save row error:\", err);\r\n      alert(\"âš ï¸ Error saving row or stats. Check console.\");\r\n    }\r\n  }\r\n\r\n  async function saveAll() {\r\n    setSavingAll(true);\r\n    try {\r\n      for (const r of derivedRows) {\r\n        const payload = { id: r.id || null, date: currentDate };\r\n        allCols.forEach((c) => payload[c] = toNumber(r[c]));\r\n        payload.folio = r.folio || \"\";\r\n        payload.guestName = r.guestName || \"\";\r\n        // âœ… Using 'api'\r\n        await api.post(\"/ledger/\", payload);\r\n      }\r\n      // âœ… Pass 'api'\r\n      await LedgerStatsUpdater(api, currentDate, cashTotals, totals, debtorsInRes);\r\n      setLedgerByDate((prev) => {\r\n        const copy = { ...prev };\r\n        copy[currentDate] =\r\n          (copy[currentDate] || []).map((r) => ({ ...r, _saveStatus: \"saved\" }));\r\n        return copy;\r\n      });\r\n      alert(\"âœ… All rows and stats saved!\");\r\n    } catch (err) {\r\n      console.error(\"Save all error:\", err);\r\n      alert(\"âš ï¸ Error saving rows or stats. Check console.\");\r\n    } finally {\r\n      setSavingAll(false);\r\n    }\r\n  }\r\n\r\n  // Helper function to find the latest date string from the dates array\r\n  const getLatestDate = () => dates.length > 0 ? dates[dates.length - 1] : isoDate(new Date());\r\n\r\n  // ðŸ”¥ RESET FUNCTION\r\n  async function resetViewToLatestDate() {\r\n    const latestDate = getLatestDate();\r\n    \r\n    // 1. Filter the dates array to only contain the latest date\r\n    const newDates = [latestDate];\r\n    setDates(newDates);\r\n\r\n    // 2. Set the current index to 0 (since it's the only element)\r\n    setCurrentDateIndex(0);\r\n    \r\n    // 3. Ensure the latest date's rows are fetched/loaded \r\n    await ensureDateCreatedWithCarry(null, latestDate); \r\n    \r\n    // Optional: Clear ledgerByDate and cashAccounts of dates no longer in the array\r\n    setLedgerByDate(prev => {\r\n        if (prev[latestDate]) {\r\n          return { [latestDate]: prev[latestDate] };\r\n        }\r\n        return {};\r\n    });\r\n    setCashAccounts(prev => {\r\n        if (prev[latestDate]) {\r\n          return { [latestDate]: prev[latestDate] };\r\n        }\r\n        return {};\r\n    });\r\n  }\r\n  // ----------------------------------------------------\r\n\r\n  async function addNewDateAuto() {\r\n    const baseDate = dates.length ? dates[dates.length - 1] : isoDate(new Date());\r\n    const newDate = nextISODate(baseDate);\r\n    setDates((prev) => {\r\n      const next = [...new Set([...prev, newDate])].sort();\r\n      setCurrentDateIndex(next.indexOf(newDate));\r\n      return next;\r\n    });\r\n    await ensureDateCreatedWithCarry(baseDate, newDate);\r\n  }\r\n  \r\n  async function addNewDateAutoBackward() {\r\n    const baseDate = dates.length ? dates[0] : isoDate(new Date());\r\n    const newDate = prevISODate(baseDate);\r\n    const prevPrevDate = prevISODate(newDate);\r\n\r\n    let newDates = [...new Set([...dates, newDate])].sort();\r\n    setDates(newDates);\r\n    \r\n    await ensureDateCreatedWithCarry(prevPrevDate, newDate);\r\n    \r\n    setCurrentDateIndex(newDates.indexOf(newDate));\r\n  }\r\n\r\n  async function prevDate() {\r\n    if (currentDateIndex > 0) {\r\n      const newIndex = currentDateIndex - 1;\r\n      const target = dates[newIndex];\r\n      \r\n      const prevDateIndex = newIndex - 1 >= 0 ? newIndex - 1 : null;\r\n      const prevDate = prevDateIndex !== null ? dates[prevDateIndex] : null;\r\n      \r\n      await ensureDateCreatedWithCarry(prevDate, target);\r\n      setCurrentDateIndex(newIndex);\r\n    }\r\n  }\r\n\r\n  async function nextDate() {\r\n    if (currentDateIndex < dates.length - 1) {\r\n      setCurrentDateIndex(currentDateIndex + 1);\r\n      return;\r\n    }\r\n    const baseDate = dates.length ? dates[dates.length - 1] : isoDate(new Date());\r\n    const newDate = nextISODate(baseDate);\r\n    setDates((prev) => {\r\n      const next = [...new Set([...prev, newDate])].sort();\r\n      setCurrentDateIndex(next.indexOf(newDate));\r\n      return next;\r\n    });\r\n    await ensureDateCreatedWithCarry(baseDate, newDate);\r\n  }\r\n\r\n  async function handleManualDateChange(e) {\r\n    const selected = e.target.value;\r\n    if (!selected) return;\r\n    \r\n    let updatedDates = [...dates];\r\n    const exists = dates.includes(selected);\r\n    \r\n    if (!exists) {\r\n        updatedDates = [...dates, selected].sort();\r\n        setDates(updatedDates);\r\n    }\r\n    \r\n    const idx = updatedDates.indexOf(selected);\r\n    \r\n    const prevDateIndex = idx - 1 >= 0 ? idx - 1 : null;\r\n    const prevDate = prevDateIndex !== null ? updatedDates[prevDateIndex] : null;\r\n\r\n    await ensureDateCreatedWithCarry(prevDate, selected);\r\n    \r\n    setCurrentDateIndex(idx);\r\n  }\r\n\r\n  async function selectDate(idx) {\r\n    if (idx < 0 || idx >= dates.length) return;\r\n    const target = dates[idx];\r\n    \r\n    if (!ledgerByDate[target] || !ledgerByDate[target].length) {\r\n      const prevDateIndex = idx - 1 >= 0 ? idx - 1 : null;\r\n      const prevDate = prevDateIndex !== null ? dates[prevDateIndex] : null;\r\n      await ensureDateCreatedWithCarry(prevDate, target);\r\n    }\r\n    setCurrentDateIndex(idx);\r\n  }\r\n\r\n  return (\r\n    <div className=\"ledger-root\">\r\n\r\n      <LedgerTable\r\n        derivedRows={derivedRows}\r\n        cashAccounts={cashAccounts}\r\n        currentDate={currentDate}\r\n        setCellValue={setCellValue}\r\n        setCashValue={setCashValue}\r\n        addRow={addRow}\r\n        cashTotals={cashTotals}\r\n        totals={totals}\r\n        debtorsInRes={debtorsInRes}\r\n        inputRefs={inputRefs}\r\n        onSaveRow={saveRow}\r\n      />\r\n\r\n      <LedgerControls\r\n        dates={dates}\r\n        visibleDates={visibleDates}\r\n        visibleStartIndex={visibleStartIndex}\r\n        currentDateIndex={currentDateIndex}\r\n        prevDate={prevDate}\r\n        nextDate={nextDate}\r\n        selectDate={selectDate}\r\n        addNewDateAuto={addNewDateAuto}\r\n        addNewDateAutoBackward={addNewDateAutoBackward}\r\n        resetViewToLatestDate={resetViewToLatestDate} \r\n        handleManualDateChange={handleManualDateChange}\r\n        addRow={addRow}\r\n        saveAll={saveAll}\r\n        savingAll={savingAll}\r\n      />\r\n\r\n    </div>\r\n  );\r\n}"],"names":["numericCols","allCols","defaultRow","row","id","arguments","length","undefined","_saveStatus","forEach","col","includes","toNumber","val","n","parseFloat","isNaN","fmt","toLocaleString","minimumFractionDigits","maximumFractionDigits","isoDate","d","date","Date","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","concat","nextISODate","dateStr","setDate","prevISODate","LedgerTable","_ref","derivedRows","cashAccounts","currentDate","setCellValue","setCashValue","cashTotals","totals","debtorsInRes","inputRefs","onSaveRow","displayNumericOrder","Header","_ref2","title","_jsx","children","dangerouslySetInnerHTML","__html","cash","Object","fromEntries","map","c","_jsxs","className","style","width","r","ri","textAlign","color","type","value","folio","onChange","e","target","ref","el","current","guestName","pax","f","step","placeholder","paddingRight","fontWeight","balCf","onClick","colSpan","height","async","LedgerStatsUpdater","axiosInstance","res","get","existing","Array","isArray","data","payload","debtors_in_res","keys","k","_cashTotals$k","startsWith","_totals$k","some","Number","put","console","log","post","err","error","LedgerControls","dates","visibleDates","visibleStartIndex","currentDateIndex","prevDate","nextDate","selectDate","addNewDateAuto","addNewDateAutoBackward","resetViewToLatestDate","handleManualDateChange","addRow","saveAll","savingAll","disabled","i","realIndex","isActive","window","print","Ledger","_ledgerByDate$current","useNavigate","setDates","useState","setCurrentDateIndex","ledgerByDate","setLedgerByDate","setCashAccounts","loadingDates","setLoadingDates","loadingRows","setLoadingRows","setSavingAll","useRef","chargeCols","fetchRowsFromApi","api","idx","_r$id","ensureDateCreatedWithCarry","newDate","carryRows","prevRows","prev","_objectSpread","pr","tCharge","_row$tCharge","reduce","s","balBf","bankTr","tLedger","zigSwipe","ecoCash","usdSwipe","computeBalCfForRow","trim","_pr$folio","_pr$pax","nr","acc","food","bar","laundry","swimming","roomHire","other","push","initialRows","useEffect","list","sort","_unused","today","loadDates","rows","_copy$currentDate2","copy","arr","setTimeout","_inputRefs$current","_inputRefs$current$fo","focus","call","mounted","fetched","_unused2","ensureRowsFor","useMemo","totalDates","start","end","Math","max","slice","_ledgerByDate$current2","sum","t","index","raw","_copy$currentDate","curr","confirm","_copy$currentDate3","alert","newIndex","prevDateIndex","baseDate","next","Set","indexOf","prevPrevDate","newDates","latestDate","selected","updatedDates"],"sourceRoot":""}