"use strict";(self.webpackChunkhotel_frontend=self.webpackChunkhotel_frontend||[]).push([[761],{761:(e,s,i)=>{i.r(s),i.d(s,{default:()=>d});var a=i(43),l=i(216),n=i(931),c=i(579);const d=()=>{const{id:e}=(0,l.g)(),s=(0,l.Zp)(),[i,d]=(0,a.useState)(null),[r,t]=(0,a.useState)([]),[o,h]=(0,a.useState)(!0),[x,j]=(0,a.useState)(null),p=sessionStorage.getItem("access"),m=(0,a.useCallback)(async()=>{if(e){h(!0);try{const[s,i]=await Promise.all([n.A.get("/invoice/invoices/".concat(e,"/")),n.A.get("/invoice/invoicelines/?invoice=".concat(e))]);d(s.data),t(i.data)}catch(i){console.error("Failed to load invoice detail:",i),j("Could not load invoice details."),i.response&&401===i.response.status&&s("/login")}finally{h(!1)}}},[e,s]);if((0,a.useEffect)(()=>{p?m():s("/login")},[m,p,s]),o)return(0,c.jsx)("div",{className:"invoice-detail-page",children:(0,c.jsx)("p",{className:"loading-text",children:"Loading Details..."})});if(x)return(0,c.jsxs)("div",{className:"invoice-detail-page",children:[(0,c.jsx)("p",{className:"error-text",children:x}),(0,c.jsx)("button",{className:"back-btn",onClick:()=>s("/invoices"),children:"Go Back"})]});if(!i)return null;const v=r.reduce((e,s)=>e+(parseFloat(s.charges)||0)-(parseFloat(s.credits)||0),0),_=.15*v,u=v+_;return(0,c.jsxs)("div",{className:"invoice-detail-page",children:[(0,c.jsx)("div",{className:"detail-actions",children:(0,c.jsx)("button",{className:"back-btn",onClick:()=>s("/invoices"),children:"\u2190 Back to List"})}),(0,c.jsxs)("div",{className:"invoice-paper",children:[(0,c.jsxs)("header",{className:"paper-header",children:[(0,c.jsxs)("div",{className:"brand-section",children:[(0,c.jsx)("h1",{children:"The Pumpkin Hotel (Pvt) Ltd"}),(0,c.jsx)("p",{children:"Head Office: 29 Scanlen Drive, Borrowdale, Harare"}),(0,c.jsx)("p",{children:"Stand 604 Kotwa \u2022 P.O. Box 51"}),(0,c.jsxs)("p",{className:"vat-line",children:[(0,c.jsx)("b",{children:"VAT No:"})," ",i.vat_number]})]}),(0,c.jsxs)("div",{className:"meta-section",children:[(0,c.jsx)("h2",{children:"TAX INVOICE"}),(0,c.jsxs)("div",{className:"invoice-number-box",children:[(0,c.jsx)("span",{children:"No:"})," ",i.invoice_number]})]})]}),(0,c.jsx)("div",{className:"info-grid",children:(0,c.jsxs)("div",{className:"info-column",children:[(0,c.jsx)("h3",{children:"Bill To:"}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Name:"})," ",i.name]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("b",{children:"Address:"})," ",i.address]})]})}),(0,c.jsxs)("section",{className:"stay-details-grid",children:[(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("label",{children:"Arrival"}),(0,c.jsx)("span",{children:i.arrival_date})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("label",{children:"Departure"}),(0,c.jsx)("span",{children:i.departure_date})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("label",{children:"Room"}),(0,c.jsx)("span",{children:i.room_no})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("label",{children:"Type"}),(0,c.jsx)("span",{children:i.room_type})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("label",{children:"Adults"}),(0,c.jsx)("span",{children:i.adults})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("label",{children:"Kids"}),(0,c.jsx)("span",{children:i.children})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("label",{children:"Rate"}),(0,c.jsx)("span",{children:i.rate_allocated})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("label",{children:"Account"}),(0,c.jsx)("span",{children:i.company_account_no})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)("label",{children:"Recep"}),(0,c.jsx)("span",{children:i.receptionist})]})]}),(0,c.jsxs)("table",{className:"paper-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Date"}),(0,c.jsx)("th",{children:"Description"}),(0,c.jsx)("th",{children:"Voucher"}),(0,c.jsx)("th",{children:"Charges"}),(0,c.jsx)("th",{children:"Credits"})]})}),(0,c.jsx)("tbody",{children:r.map((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.date}),(0,c.jsx)("td",{children:e.description}),(0,c.jsx)("td",{children:e.voucher}),(0,c.jsx)("td",{children:e.charges}),(0,c.jsx)("td",{children:e.credits})]},s))})]}),(0,c.jsxs)("div",{className:"paper-totals",children:[(0,c.jsxs)("div",{className:"total-row",children:[(0,c.jsx)("span",{children:"Sub Total:"})," ",(0,c.jsxs)("span",{children:["$",v.toFixed(2)]})]}),(0,c.jsxs)("div",{className:"total-row",children:[(0,c.jsx)("span",{children:"VAT (15%):"})," ",(0,c.jsxs)("span",{children:["$",_.toFixed(2)]})]}),(0,c.jsxs)("div",{className:"total-row final",children:[(0,c.jsx)("span",{children:"Total:"})," ",(0,c.jsxs)("span",{children:["$",u.toFixed(2)]})]})]}),(0,c.jsxs)("div",{className:"paper-footer",children:[(0,c.jsx)("p",{children:"Guest Signature: _________________________"}),(0,c.jsx)("div",{className:"download-section",children:(0,c.jsx)("a",{href:"".concat({NODE_ENV:"production",PUBLIC_URL:"/hotel-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:8000/api/v2","/invoice/invoices/").concat(e,"/pdf/"),target:"_blank",rel:"noreferrer",className:"pdf-download-btn",children:"Download Official PDF"})})]})]})]})}}}]);
//# sourceMappingURL=761.4fe53721.chunk.js.map