{"version":3,"file":"static/js/788.85157c46.chunk.js","mappings":"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","sources":["services/api.js","pages/HouseStatusReport.jsx"],"sourcesContent":["// src/services/api.js\r\nimport axios from 'axios';\r\n\r\nconst API_BASE = process.env.REACT_APP_API_BASE || 'http://127.0.0.1:8000/api/v2';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE,\r\n  headers: { 'Content-Type': 'application/json' },\r\n});\r\n\r\n// Attach latest access token before every request\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('access');\r\n    if (token) config.headers.Authorization = `Bearer ${token}`;\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Handle 401 and automatically refresh token\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n      const refreshToken = localStorage.getItem('refresh');\r\n\r\n      if (refreshToken) {\r\n        try {\r\n          const res = await axios.post(`${API_BASE.replace('/v2', '/v1')}/token/refresh/`, {\r\n            refresh: refreshToken,\r\n          });\r\n\r\n          // Save new access token\r\n          localStorage.setItem('access', res.data.access);\r\n          originalRequest.headers.Authorization = `Bearer ${res.data.access}`;\r\n\r\n          // Retry original request\r\n          return api(originalRequest);\r\n        } catch (err) {\r\n          localStorage.removeItem('access');\r\n          localStorage.removeItem('refresh');\r\n          window.location.href = '/login'; // Redirect to login if refresh fails\r\n        }\r\n      } else {\r\n        window.location.href = '/login'; // No refresh token, force login\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport api from \"../services/api\";\r\nimport \"../styles/HouseStatusReport.css\";\r\n\r\n// -------------------------\r\n// Static fallback rooms\r\n// -------------------------\r\nconst STATIC_ROOMS = Array.from({ length: 58 }, (_, i) => {\r\n  const typeMap = {\r\n    1: \"Double\", 2: \"Double\", 3: \"Double\", 4: \"Twin\", 5: \"Twin\",\r\n    6: \"Twin\", 7: \"Twin\", 8: \"Twin\", 9: \"Twin\", 10: \"Twin\",\r\n    11: \"Twin\", 12: \"Twin\", 13: \"Twin\", 14: \"Twin\", 15: \"Twin\",\r\n    16: \"Twin\", 17: \"Twin\", 18: \"Twin\", 19: \"Twin\", 20: \"Twin\",\r\n    21: \"Twin\", 22: \"Twin\", 23: \"Twin\", 24: \"Twin\", 25: \"Double\",\r\n    26: \"Double\", 27: \"Twin\", 28: \"Twin\", 29: \"Twin\", 30: \"Double\",\r\n    31: \"Twin\", 32: \"Twin\", 33: \"Twin\", 34: \"Twin\", 35: \"Double\",\r\n    36: \"Double\", 37: \"Twin\", 38: \"Twin\", 39: \"Suite\", 40: \"Suite\",\r\n    41: \"Double\", 42: \"Double\", 43: \"Double\", 44: \"Double\", 45: \"Double\",\r\n    46: \"Double\", 47: \"Double\", 48: \"Twin\", 49: \"Double\", 50: \"Double\",\r\n    51: \"Single\", 52: \"Single\", 53: \"Single\", 54: \"Twin\", 55: \"Twin\",\r\n    56: \"Twin\", 57: \"Twin\", 58: \"Single\",\r\n  };\r\n  return {\r\n    room_number: i + 1,\r\n    room_type: typeMap[i + 1],\r\n    guest_name: \"\",\r\n    pax: \"\",\r\n    organization: \"\",\r\n    check_in: \"\",\r\n    check_out: \"\",\r\n    requirements: \"\",\r\n    time: \"\",\r\n    rate: \"\",\r\n    out_of_order: false,\r\n  };\r\n});\r\n\r\n// -------------------------\r\n// Date helpers\r\n// -------------------------\r\nconst isoDate = (d) => new Date(d).toISOString().split(\"T\")[0];\r\nconst nextISODate = (dateStr) => {\r\n  const d = new Date(dateStr);\r\n  d.setDate(d.getDate() + 1);\r\n  return isoDate(d);\r\n};\r\nconst prevISODate = (dateStr) => {\r\n  const d = new Date(dateStr);\r\n  d.setDate(d.getDate() - 1);\r\n  return isoDate(d);\r\n};\r\n\r\n// -------------------------\r\n// Main Component\r\n// -------------------------\r\nexport default function HouseStatusReport() {\r\n  const todayStr = isoDate(new Date());\r\n  const [date, setDate] = useState(todayStr);\r\n  const [rows, setRows] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [savingAll, setSavingAll] = useState(false);\r\n  const [message, setMessage] = useState(null);\r\n  const [filter, setFilter] = useState(\"all\");\r\n  const [darkMode, setDarkMode] = useState(localStorage.getItem(\"house-darkmode\") === \"true\");\r\n  const tableRef = useRef(null);\r\n\r\n  // -------------------------\r\n  // Fetch data every time the date changes\r\n  // -------------------------\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [date]);\r\n\r\n  // -------------------------\r\n  // Dark mode effect\r\n  // -------------------------\r\n  useEffect(() => {\r\n    document.body.className = darkMode ? \"dark-mode\" : \"\";\r\n    localStorage.setItem(\"house-darkmode\", darkMode);\r\n  }, [darkMode]);\r\n\r\n  // -------------------------\r\n  // Fetch bookings from backend\r\n  // -------------------------\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Fetch all bookings from backend\r\n      const res = await api.get(`/house_status_report/house-status/`);\r\n      const allBookings = res.data;\r\n\r\n      // Copy static rooms for full display\r\n      const updatedRows = STATIC_ROOMS.map((room) => ({ ...room }));\r\n      const selectedDateObj = new Date(date);\r\n\r\n      // Overlay guest data if room is occupied on selected date\r\n      allBookings.forEach((booking) => {\r\n        const checkIn = new Date(booking.check_in);\r\n        const checkOut = new Date(booking.check_out);\r\n\r\n        if (selectedDateObj >= checkIn && selectedDateObj <= checkOut) {\r\n          const roomIndex = updatedRows.findIndex(\r\n            (r) => r.room_number === parseInt(booking.room_number)\r\n          );\r\n          if (roomIndex !== -1) {\r\n            updatedRows[roomIndex] = {\r\n              ...updatedRows[roomIndex],\r\n              guest_name: booking.guest_name,\r\n              organization: booking.organization,\r\n              pax: booking.pax,\r\n              check_in: booking.check_in,\r\n              check_out: booking.check_out,\r\n              rate: booking.rate,\r\n              out_of_order: booking.out_of_order,\r\n              time: booking.time,\r\n            };\r\n          }\r\n        }\r\n      });\r\n\r\n      setRows(updatedRows);\r\n    } catch (err) {\r\n      console.error(\"Fetch error:\", err);\r\n      setRows(STATIC_ROOMS);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // -------------------------\r\n  // Update a single cell\r\n  // -------------------------\r\n  const handleChange = (idx, field, value) => {\r\n    const updatedRows = [...rows];\r\n    updatedRows[idx][field] = value;\r\n    setRows(updatedRows);\r\n  };\r\n\r\n  // -------------------------\r\n  // Save a single row\r\n  // -------------------------\r\n  const handleSave = async (row) => {\r\n    try {\r\n      await api.post(`/house_status_report/house-status/`, { date, ...row });\r\n      setMessage({ type: \"success\", text: `Room ${row.room_number} saved ‚úÖ` });\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage({ type: \"error\", text: `‚ùå Error saving Room ${row.room_number}` });\r\n    } finally {\r\n      setTimeout(() => setMessage(null), 3000);\r\n    }\r\n  };\r\n\r\n  // -------------------------\r\n  // Save all rows at once\r\n  // -------------------------\r\n  const handleSaveAll = async () => {\r\n    setSavingAll(true);\r\n    try {\r\n      await api.post(`/house_status_report/house-status/block_save/`, { date, rows });\r\n      setMessage({ type: \"success\", text: \"All rooms saved successfully ‚úÖ\" });\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage({ type: \"error\", text: \"‚ùå Error saving all rooms\" });\r\n    } finally {\r\n      setSavingAll(false);\r\n      setTimeout(() => setMessage(null), 3000);\r\n    }\r\n  };\r\n\r\n  // -------------------------\r\n  // Filter rows for display\r\n  // -------------------------\r\n  const filteredRows = rows.filter((r) => {\r\n    if (filter === \"occupied\") return r.guest_name.trim() !== \"\";\r\n    if (filter === \"unoccupied\") return r.guest_name.trim() === \"\";\r\n    if (filter === \"outoforder\") return r.out_of_order;\r\n    return true; // 'all' shows everything\r\n  });\r\n\r\n  // -------------------------\r\n  // Render\r\n  // -------------------------\r\n  return (\r\n    <div className={`house-status-container ${darkMode ? \"dark-mode\" : \"\"}`}>\r\n      <div className=\"toolbar top-row\">\r\n        <div className=\"left\">\r\n          <h1>üè® House Status Report</h1>\r\n        </div>\r\n        <div className=\"right\">\r\n          <button onClick={() => setDate(prevISODate(date))}>‚¨Ö Previous Day</button>\r\n          <button onClick={() => setDate(nextISODate(date))}>‚û° Next Day</button>\r\n          <input type=\"date\" value={date} onChange={(e) => setDate(e.target.value)} />\r\n          <button onClick={handleSaveAll} disabled={savingAll}>\r\n            {savingAll ? \"üíæ Saving...\" : \"üíæ Save All\"}\r\n          </button>\r\n          <button onClick={() => window.print()}>üñ® Print</button>\r\n          <button onClick={() => setDarkMode(!darkMode)}>\r\n            {darkMode ? \"üåû Light\" : \"üåô Dark\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {message && (\r\n        <div className={`message ${message.type === \"error\" ? \"message--err\" : \"message--ok\"}`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"filters\">\r\n        <button className={filter === \"all\" ? \"active\" : \"\"} onClick={() => setFilter(\"all\")}>All</button>\r\n        <button className={filter === \"occupied\" ? \"active\" : \"\"} onClick={() => setFilter(\"occupied\")}>Occupied</button>\r\n        <button className={filter === \"unoccupied\" ? \"active\" : \"\"} onClick={() => setFilter(\"unoccupied\")}>Vacant</button>\r\n        <button className={filter === \"outoforder\" ? \"active\" : \"\"} onClick={() => setFilter(\"outoforder\")}>Out of Order</button>\r\n      </div>\r\n\r\n      <div className=\"table-wrap\" ref={tableRef}>\r\n        <table className=\"house-status-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Room</th>\r\n              <th>Type</th>\r\n              <th>Guest Name</th>\r\n              <th>Pax</th>\r\n              <th>Organization</th>\r\n              <th>Check In</th>\r\n              <th>Check Out</th>\r\n              <th>Requirements</th>\r\n              <th>Time</th>\r\n              <th>Rate</th>\r\n              <th>Save</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {loading ? (\r\n              <tr>\r\n                <td colSpan=\"11\" style={{ textAlign: \"center\", padding: \"40px\" }}>\r\n                  Loading data...\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              filteredRows.map((row, idx) => (\r\n                <tr key={row.room_number}>\r\n                  <td>{row.room_number}</td>\r\n                  <td>{row.room_type}</td>\r\n                  <td><input value={row.guest_name} onChange={(e) => handleChange(idx, \"guest_name\", e.target.value)} /></td>\r\n                  <td><input type=\"number\" value={row.pax} onChange={(e) => handleChange(idx, \"pax\", e.target.value)} /></td>\r\n                  <td><input value={row.organization} onChange={(e) => handleChange(idx, \"organization\", e.target.value)} /></td>\r\n                  <td><input type=\"date\" value={row.check_in} onChange={(e) => handleChange(idx, \"check_in\", e.target.value)} /></td>\r\n                  <td><input type=\"date\" value={row.check_out} onChange={(e) => handleChange(idx, \"check_out\", e.target.value)} /></td>\r\n                  <td><input value={row.requirements} onChange={(e) => handleChange(idx, \"requirements\", e.target.value)} /></td>\r\n                  <td><input value={row.time} onChange={(e) => handleChange(idx, \"time\", e.target.value)} /></td>\r\n                  <td><input type=\"number\" step=\"0.01\" value={row.rate} onChange={(e) => handleChange(idx, \"rate\", e.target.value)} /></td>\r\n                  <td><button onClick={() => handleSave(row)}>üíæ</button></td>\r\n                </tr>\r\n              ))\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["API_BASE","process","REACT_APP_API_BASE","api","axios","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","async","_error$response","originalRequest","status","_retry","refreshToken","res","post","replace","refresh","setItem","data","access","err","removeItem","window","location","href","STATIC_ROOMS","Array","from","length","_","i","room_number","room_type","guest_name","pax","organization","check_in","check_out","requirements","time","rate","out_of_order","isoDate","d","Date","toISOString","split","nextISODate","dateStr","setDate","getDate","prevISODate","HouseStatusReport","todayStr","date","useState","rows","setRows","loading","setLoading","savingAll","setSavingAll","message","setMessage","filter","setFilter","darkMode","setDarkMode","tableRef","useRef","useEffect","fetchData","document","body","className","allBookings","get","updatedRows","map","room","_objectSpread","selectedDateObj","forEach","booking","checkIn","checkOut","roomIndex","findIndex","r","parseInt","console","handleChange","idx","field","value","filteredRows","trim","_jsxs","children","_jsx","onClick","type","onChange","e","target","text","setTimeout","disabled","print","ref","colSpan","style","textAlign","padding","row","step","handleSave"],"sourceRoot":""}