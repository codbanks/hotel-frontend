{"version":3,"file":"static/js/265.f04b8913.chunk.js","mappings":"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","sources":["pages/reports/SalesMarketing.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n// Corrected CSS path to the root level to improve resolution robustness\r\nimport '../../styles/SalesMarketing.css';\r\n\r\n// --- Utility Functions ---\r\n\r\n// Formats a number to two decimal places, returning a string\r\nconst formatNumber = (num, decimals = 2) => {\r\n    if (typeof num !== 'number' || isNaN(num) || !isFinite(num)) {\r\n        return '-';\r\n    }\r\n    return num.toFixed(decimals);\r\n};\r\n\r\n// Formats currency, handling NaN/Infinity by returning error string\r\nconst formatCurrency = (num) => {\r\n    if (typeof num !== 'number' || isNaN(num) || !isFinite(num)) {\r\n        return <span className=\"error-text\">-</span>;\r\n    }\r\n    return `$ ${num.toFixed(2)}`;\r\n};\r\n\r\n// Calculates percentage, handles division by zero by returning a special marker\r\nconst calculatePercentage = (numerator, denominator) => {\r\n    if (denominator === 0 || denominator === null || denominator === undefined) {\r\n        return { value: NaN, display: <span className=\"error-text\">0.00</span> };\r\n    }\r\n    const value = (numerator / denominator) * 100;\r\n    return { value, display: formatNumber(value) };\r\n};\r\n\r\n// Calculates Average Rate, handles division by zero\r\nconst calculateAverageRate = (revenue, roomNights) => {\r\n    if (roomNights === 0 || roomNights === null || roomNights === undefined) {\r\n        return { value: NaN, display: <span className=\"error-text\">#DIV/0!</span> };\r\n    }\r\n    const value = revenue / roomNights;\r\n    return { value, display: formatCurrency(value) };\r\n};\r\n\r\n\r\n// --- MOCK DATA / BACKEND FETCH SIMULATION ---\r\nfunction fetchSalesData(date) {\r\n    console.log(`Fetching Sales & Marketing data for: ${date}`);\r\n\r\n    // Data based on the user's screenshot for 15-Jul-25 (Daily/MTD)\r\n    // Values represent { dayBedNights, dayRoomNights, dayRevenue, mtdBedNights, mtdRoomNights, mtdRevenue }\r\n    return {\r\n        Conference: { dbn: 0, drn: 0, dr: 0, mbn: 0, mrn: 0, mr: 0 },\r\n        Business:   { dbn: 0, drn: 0, dr: 0, mbn: 136, mrn: 132, mr: 6505.00 },\r\n        Transit:    { dbn: 0, drn: 0, dr: 0, mbn: 0, mrn: 0, mr: 0 },\r\n        Leisure:    { dbn: 0, drn: 0, dr: 0, mbn: 0, mrn: 0, mr: 0 },\r\n        \r\n        // Non-segmented items (Comp and House Use)\r\n        Complimentary: { dbn: 0, drn: 0, dr: 0, mbn: 2, mrn: 2, mr: 0 },\r\n        HouseUse:      { dbn: 1, drn: 1, dr: 0, mbn: 18, mrn: 18, mr: 0 },\r\n    };\r\n}\r\n\r\n\r\n// --- CALCULATION ENGINE ---\r\nfunction calculateSalesReports(rawData) {\r\n    const segments = ['Conference', 'Business', 'Transit', 'Leisure'];\r\n\r\n    // 1. Calculate TOTALS for Day and MTD (Segments only)\r\n    const dailyTotal = segments.reduce((acc, key) => ({\r\n        bedNights: acc.bedNights + rawData[key].dbn,\r\n        roomNights: acc.roomNights + rawData[key].drn,\r\n        revenue: acc.revenue + rawData[key].dr,\r\n    }), { bedNights: 0, roomNights: 0, revenue: 0 });\r\n\r\n    const mtdTotal = segments.reduce((acc, key) => ({\r\n        bedNights: acc.bedNights + rawData[key].mbn,\r\n        roomNights: acc.roomNights + rawData[key].mrn,\r\n        revenue: acc.revenue + rawData[key].mr,\r\n    }), { bedNights: 0, roomNights: 0, revenue: 0 });\r\n\r\n\r\n    // 2. Process Segment Rows\r\n    const segmentData = segments.map(key => {\r\n        const item = rawData[key];\r\n\r\n        // Day Calculations\r\n        const dayContr = calculatePercentage(item.dbn, dailyTotal.bedNights);\r\n        const dayCont = calculatePercentage(item.drn, dailyTotal.roomNights);\r\n        const dayRate = calculateAverageRate(item.dr, item.drn);\r\n\r\n        // MTD Calculations\r\n        const mtdContr = calculatePercentage(item.mbn, mtdTotal.bedNights);\r\n        const mtdCont = calculatePercentage(item.mrn, mtdTotal.roomNights);\r\n        const mtdRate = calculateAverageRate(item.mr, item.mrn);\r\n\r\n        return {\r\n            segment: key,\r\n            day: {\r\n                bedNights: item.dbn, contr: dayContr, roomNights: item.drn, cont: dayCont,\r\n                revenue: item.dr, rate: dayRate\r\n            },\r\n            mtd: {\r\n                bedNights: item.mbn, contr: mtdContr, roomNights: item.mrn, cont: mtdCont,\r\n                revenue: item.mr, rate: mtdRate\r\n            }\r\n        };\r\n    });\r\n\r\n    // 3. Create TOTAL Segment Row\r\n    const totalSegmentRow = {\r\n        segment: \"TOTAL\",\r\n        isTotal: true,\r\n        day: {\r\n            bedNights: dailyTotal.bedNights,\r\n            contr: calculatePercentage(dailyTotal.bedNights, dailyTotal.bedNights), // Always 100%\r\n            roomNights: dailyTotal.roomNights,\r\n            cont: calculatePercentage(dailyTotal.roomNights, dailyTotal.roomNights), // Always 100%\r\n            revenue: dailyTotal.revenue,\r\n            rate: calculateAverageRate(dailyTotal.revenue, dailyTotal.roomNights)\r\n        },\r\n        mtd: {\r\n            bedNights: mtdTotal.bedNights,\r\n            contr: calculatePercentage(mtdTotal.bedNights, mtdTotal.bedNights),\r\n            roomNights: mtdTotal.roomNights,\r\n            cont: calculatePercentage(mtdTotal.roomNights, mtdTotal.roomNights),\r\n            revenue: mtdTotal.revenue,\r\n            rate: calculateAverageRate(mtdTotal.revenue, mtdTotal.roomNights)\r\n        }\r\n    };\r\n\r\n\r\n    // 4. Handle Complimentary and House Use (Non-Segmented)\r\n    const compRow = {\r\n        segment: \"COMPLIMENTARY\",\r\n        isComp: true,\r\n        day: {\r\n            bedNights: rawData.Complimentary.dbn,\r\n            contr: { value: 0, display: formatNumber(0) }, // Contributes to Grand Total, but not segment %contr\r\n            roomNights: rawData.Complimentary.drn,\r\n            cont: { value: 0, display: formatNumber(0) },\r\n            revenue: rawData.Complimentary.dr,\r\n            rate: calculateAverageRate(rawData.Complimentary.dr, rawData.Complimentary.drn)\r\n        },\r\n        mtd: {\r\n            bedNights: rawData.Complimentary.mbn,\r\n            // Calculate percentage based on Grand Total MTD Bednights (for display consistency with grand total row)\r\n            contr: calculatePercentage(rawData.Complimentary.mbn, mtdTotal.bedNights + rawData.Complimentary.mbn + rawData.HouseUse.mbn), \r\n            roomNights: rawData.Complimentary.mrn,\r\n            // Calculate percentage based on Grand Total MTD Roomnights (for display consistency)\r\n            cont: calculatePercentage(rawData.Complimentary.mrn, mtdTotal.roomNights + rawData.Complimentary.mrn + rawData.HouseUse.mrn),\r\n            revenue: rawData.Complimentary.mr,\r\n            rate: calculateAverageRate(rawData.Complimentary.mr, rawData.Complimentary.mrn)\r\n        }\r\n    };\r\n    \r\n    const houseUseRow = {\r\n        segment: \"HOUSE USE\",\r\n        isHouseUse: true,\r\n        day: {\r\n            bedNights: rawData.HouseUse.dbn,\r\n            contr: { value: 0, display: formatNumber(0) }, \r\n            roomNights: rawData.HouseUse.drn,\r\n            cont: { value: 0, display: formatNumber(0) },\r\n            revenue: rawData.HouseUse.dr,\r\n            rate: calculateAverageRate(rawData.HouseUse.dr, rawData.HouseUse.drn)\r\n        },\r\n        mtd: {\r\n            bedNights: rawData.HouseUse.mbn,\r\n            // Calculate percentage based on Grand Total MTD Bednights\r\n            contr: calculatePercentage(rawData.HouseUse.mbn, mtdTotal.bedNights + rawData.Complimentary.mbn + rawData.HouseUse.mbn),\r\n            roomNights: rawData.HouseUse.mrn,\r\n            // Calculate percentage based on Grand Total MTD Roomnights\r\n            cont: calculatePercentage(rawData.HouseUse.mrn, mtdTotal.roomNights + rawData.Complimentary.mrn + rawData.HouseUse.mrn),\r\n            revenue: rawData.HouseUse.mr,\r\n            rate: calculateAverageRate(rawData.HouseUse.mr, rawData.HouseUse.mrn)\r\n        }\r\n    };\r\n    \r\n    // 5. Calculate GRAND TOTAL (All rows)\r\n    const grandTotalDay = {\r\n        bedNights: dailyTotal.bedNights + compRow.day.bedNights + houseUseRow.day.bedNights,\r\n        roomNights: dailyTotal.roomNights + compRow.day.roomNights + houseUseRow.day.roomNights,\r\n        revenue: dailyTotal.revenue + compRow.day.revenue + houseUseRow.day.revenue,\r\n    };\r\n    \r\n    const grandTotalMTD = {\r\n        bedNights: mtdTotal.bedNights + compRow.mtd.bedNights + houseUseRow.mtd.bedNights,\r\n        roomNights: mtdTotal.roomNights + compRow.mtd.roomNights + houseUseRow.mtd.roomNights,\r\n        revenue: mtdTotal.revenue + compRow.mtd.revenue + houseUseRow.mtd.revenue,\r\n    };\r\n    \r\n    const grandTotalRow = {\r\n        segment: \"TOTAL\",\r\n        isGrandTotal: true,\r\n        day: {\r\n            bedNights: grandTotalDay.bedNights,\r\n            contr: calculatePercentage(grandTotalDay.bedNights, grandTotalDay.bedNights),\r\n            roomNights: grandTotalDay.roomNights,\r\n            cont: calculatePercentage(grandTotalDay.roomNights, grandTotalDay.roomNights),\r\n            revenue: grandTotalDay.revenue,\r\n            rate: calculateAverageRate(grandTotalDay.revenue, grandTotalDay.roomNights)\r\n        },\r\n        mtd: {\r\n            bedNights: grandTotalMTD.bedNights,\r\n            contr: calculatePercentage(grandTotalMTD.bedNights, grandTotalMTD.bedNights),\r\n            roomNights: grandTotalMTD.roomNights,\r\n            cont: calculatePercentage(grandTotalMTD.roomNights, grandTotalMTD.roomNights),\r\n            revenue: grandTotalMTD.revenue,\r\n            rate: calculateAverageRate(grandTotalMTD.revenue, grandTotalMTD.roomNights)\r\n        }\r\n    };\r\n\r\n\r\n    return [\r\n        ...segmentData,\r\n        totalSegmentRow,\r\n        compRow,\r\n        houseUseRow,\r\n        grandTotalRow\r\n    ];\r\n}\r\n\r\n\r\n// --- REACT COMPONENT ---\r\nconst SalesMarketing = () => {\r\n    const [reportData, setReportData] = useState([]);\r\n    const [currentDate, setCurrentDate] = useState('2025-07-15');\r\n\r\n    // Fetch and calculate data on mount/date change\r\n    useEffect(() => {\r\n        const rawData = fetchSalesData(currentDate);\r\n        const calculatedData = calculateSalesReports(rawData);\r\n        setReportData(calculatedData);\r\n    }, [currentDate]);\r\n\r\n    // Placeholder functions for date navigation\r\n    const handlePrevDay = () => console.log(\"Navigating to previous day...\");\r\n    const handleNextDay = () => console.log(\"Navigating to next day...\");\r\n\r\n    // Helper function to determine row class\r\n    const getRowClass = (row) => {\r\n        if (row.isGrandTotal) return 'grand-total-row';\r\n        if (row.isTotal) return 'total-row';\r\n        return '';\r\n    };\r\n\r\n    // Helper to render columns for a period (Day or MTD)\r\n    const renderPeriodColumns = (periodData) => (\r\n        <>\r\n            <td className=\"numeric\">{formatNumber(periodData.bedNights, 0)}</td>\r\n            <td className=\"numeric\">{periodData.contr.display}</td>\r\n            <td className=\"numeric\">{formatNumber(periodData.roomNights, 0)}</td>\r\n            <td className=\"numeric\">{periodData.cont.display}</td>\r\n            <td className=\"currency\">{formatCurrency(periodData.revenue)}</td>\r\n            <td className=\"currency\">{periodData.rate.display}</td>\r\n        </>\r\n    );\r\n\r\n    return (\r\n        <div className=\"sales-marketing-container\">\r\n            <div className=\"report-header\">\r\n                <button className=\"date-nav-btn\" onClick={handlePrevDay}>❮ Prev</button>\r\n                <div className=\"report-header-center\">\r\n                    <h1 className=\"report-title\">Sales and Marketing Segmentation</h1>\r\n                    <p className=\"report-sub\">Date: <span>{currentDate}</span></p>\r\n                </div>\r\n                <button className=\"date-nav-btn\" onClick={handleNextDay}>Next ❯</button>\r\n            </div>\r\n\r\n            <div className=\"table-wrapper\">\r\n                <table id=\"analysisTable\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th rowSpan=\"2\" style={{ verticalAlign: 'bottom' }}>Segment</th>\r\n                            <th colSpan=\"6\" className=\"group-header\">Daily Stats (Actual)</th>\r\n                            <th colSpan=\"6\" className=\"group-header\">Month To Date</th>\r\n                        </tr>\r\n                        <tr>\r\n                            <th>Bed Nights</th><th>%Contr</th>\r\n                            <th>Room Nights</th><th>% Cont</th>\r\n                            <th className=\"currency\">Revenue</th><th className=\"currency\">Ave Rm Rate</th>\r\n                            \r\n                            <th>Bed Nights</th><th>%Contr</th>\r\n                            <th>Room Nights</th><th>% Cont</th>\r\n                            <th className=\"currency\">Revenue</th><th className=\"currency\">Ave Rm Rate</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {reportData.map((row, index) => (\r\n                            <tr key={index} className={getRowClass(row)}>\r\n                                <td>{row.segment}</td>\r\n                                {renderPeriodColumns(row.day)}\r\n                                {renderPeriodColumns(row.mtd)}\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SalesMarketing;"],"names":["formatNumber","num","decimals","arguments","length","undefined","isNaN","isFinite","toFixed","formatCurrency","_jsx","className","children","concat","calculatePercentage","numerator","denominator","value","NaN","display","calculateAverageRate","revenue","roomNights","SalesMarketing","reportData","setReportData","useState","currentDate","setCurrentDate","useEffect","date","calculatedData","rawData","segments","dailyTotal","reduce","acc","key","bedNights","dbn","drn","dr","mtdTotal","mbn","mrn","mr","segmentData","map","item","dayContr","dayCont","dayRate","mtdContr","mtdCont","mtdRate","segment","day","contr","cont","rate","mtd","totalSegmentRow","isTotal","compRow","isComp","Complimentary","HouseUse","houseUseRow","isHouseUse","grandTotalDay","grandTotalMTD","isGrandTotal","calculateSalesReports","console","log","Conference","Business","Transit","Leisure","getRowClass","row","renderPeriodColumns","periodData","_jsxs","_Fragment","onClick","handlePrevDay","handleNextDay","id","rowSpan","style","verticalAlign","colSpan","index"],"sourceRoot":""}