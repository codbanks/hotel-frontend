"use strict";(self.webpackChunkhotel_frontend=self.webpackChunkhotel_frontend||[]).push([[293],{293:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var t=a(555),c=a(43),l=a(931),n=a(579);const r=e=>new Date(e).toISOString().split("T")[0],d=e=>parseFloat(e)||0,i=e=>{if(void 0===e||null===e)return"$ 0.00";const s=Math.abs(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return e<0?"$ (".concat(s,")"):"$ ".concat(s)},o=(e,s)=>s&&0!==s?(e/s*100).toFixed(2):"0.00",h=()=>{const[e,s]=(0,c.useState)(r(new Date)),[a,h]=(0,c.useState)([]),[m,x]=(0,c.useState)([]),[j,N]=(0,c.useState)(!0);(0,c.useEffect)(()=>{(async()=>{N(!0);try{const s=new Date(e),a="".concat(s.getFullYear(),"-").concat(String(s.getMonth()+1).padStart(2,"0"),"-01"),[t,c]=await Promise.all([l.A.get("/ledger/?date=".concat(e)),l.A.get("/ledger/?start_date=".concat(a,"&end_date=").concat(e))]);h(t.data||[]),x(c.data||[])}catch(s){console.error("Fetch Error:",s)}finally{N(!1)}})()},[e]);const u=e=>{const s={acc:0,food:0,bar:0,lndry:0,pool:0,room:0,other:0,usd_swp:0,eco:0,zig:0,cash:0,ledg:0,bank:0};e.forEach(e=>{s.acc+=d(e.acc),s.food+=d(e.food),s.bar+=d(e.bar),s.lndry+=d(e.lndry),s.pool+=d(e.pool),s.room+=d(e.room),s.other+=d(e.other),s.usd_swp+=d(e.usd_swp),s.eco+=d(e.eco),s.zig+=d(e.zig),s.cash+=d(e.cash),s.ledg+=d(e.ledg),s.bank+=d(e.bank)});const a=s.acc+s.food+s.bar+s.lndry+s.pool+s.room+s.other,c=s.usd_swp+s.eco+s.zig+s.cash+s.ledg+s.bank;return(0,t.A)((0,t.A)({},s),{},{totalSales:a,totalCash:s.usd_swp+s.eco+s.zig+s.cash+s.bank,debtors:a-c})},p=(0,c.useMemo)(()=>u(a),[a]),S=(0,c.useMemo)(()=>u(m),[m]);return j?(0,n.jsx)("div",{className:"loading-state",children:"Syncing Financials..."}):(0,n.jsxs)("div",{className:"financial-report-scroll-container",children:[(0,n.jsx)("header",{className:"sticky-date-navigator",children:(0,n.jsxs)("div",{className:"nav-content",children:[(0,n.jsx)("button",{onClick:()=>{const a=new Date(e);a.setDate(a.getDate()-1),s(r(a))},className:"nav-btn",children:"\u2190 PREVIOUS"}),(0,n.jsxs)("div",{className:"date-badge",children:[(0,n.jsx)("span",{children:"LEDGER SUMMARY:"}),(0,n.jsx)("input",{type:"date",value:e,onChange:e=>s(e.target.value)})]}),(0,n.jsx)("button",{onClick:()=>{const a=new Date(e);a.setDate(a.getDate()+1),s(r(a))},className:"nav-btn",children:"NEXT \u2192"})]})}),(0,n.jsxs)("main",{className:"snap-wrapper",children:[(0,n.jsx)("section",{className:"report-section",children:(0,n.jsxs)("div",{className:"section-card",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsx)("h3",{children:"Departmental Sales Summary"})}),(0,n.jsx)("div",{className:"table-container",children:(0,n.jsxs)("table",{className:"fin-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-left",children:"Department"}),(0,n.jsxs)("th",{colSpan:"2",className:"group-head",children:[e," (Actual)"]}),(0,n.jsx)("th",{colSpan:"2",className:"group-head",children:"Month To Date"})]})}),(0,n.jsx)("tbody",{children:[{n:"ACCOMMODATION",d:p.acc,m:S.acc},{n:"FOOD",d:p.food,m:S.food},{n:"BEVERAGES",d:p.bar,m:S.bar},{n:"SWIMMING POOL",d:p.pool,m:S.pool},{n:"LAUNDRY",d:p.lndry,m:S.lndry},{n:"ROOM HIRE",d:p.room,m:S.room},{n:"OTHER",d:p.other,m:S.other}].map((e,s)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-left",children:e.n}),(0,n.jsx)("td",{className:"numeric",children:i(e.d)}),(0,n.jsx)("td",{className:"percent",children:o(e.d,p.totalSales)}),(0,n.jsx)("td",{className:"numeric",children:i(e.m)}),(0,n.jsx)("td",{className:"percent",children:o(e.m,S.totalSales)})]},s))}),(0,n.jsx)("tfoot",{children:(0,n.jsxs)("tr",{className:"total-row",children:[(0,n.jsx)("td",{className:"text-left",children:"TOTAL SALES"}),(0,n.jsx)("td",{className:"numeric",children:i(p.totalSales)}),(0,n.jsx)("td",{className:"percent",children:"100.00"}),(0,n.jsx)("td",{className:"numeric",children:i(S.totalSales)}),(0,n.jsx)("td",{className:"percent",children:"100.00"})]})})]})})]})}),(0,n.jsx)("section",{className:"report-section",children:(0,n.jsxs)("div",{className:"section-card",children:[(0,n.jsx)("div",{className:"card-header",children:(0,n.jsx)("h3",{children:"Revenue Cash Summary"})}),(0,n.jsx)("div",{className:"table-container",children:(0,n.jsxs)("table",{className:"fin-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-left",children:"Description"}),(0,n.jsx)("th",{colSpan:"2",className:"group-head",children:e}),(0,n.jsx)("th",{colSpan:"2",className:"group-head",children:"MTD"})]})}),(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-left",children:"USD SWIPE"}),(0,n.jsx)("td",{className:"numeric",children:i(p.usd_swp)}),(0,n.jsx)("td",{className:"percent",children:"-"}),(0,n.jsx)("td",{className:"numeric",children:i(S.usd_swp)}),(0,n.jsx)("td",{className:"percent",children:"-"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-left",children:"ECOCASH (ECO)"}),(0,n.jsx)("td",{className:"numeric",children:i(p.eco)}),(0,n.jsx)("td",{className:"percent",children:"-"}),(0,n.jsx)("td",{className:"numeric",children:i(S.eco)}),(0,n.jsx)("td",{className:"percent",children:"-"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-left",children:"ZIG / BANK"}),(0,n.jsx)("td",{className:"numeric",children:i(p.zig+p.bank)}),(0,n.jsx)("td",{className:"percent",children:"-"}),(0,n.jsx)("td",{className:"numeric",children:i(S.zig+S.bank)}),(0,n.jsx)("td",{className:"percent",children:"-"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-left",children:"USD CASH"}),(0,n.jsx)("td",{className:"numeric",children:i(p.cash)}),(0,n.jsx)("td",{className:"percent",children:"-"}),(0,n.jsx)("td",{className:"numeric",children:i(S.cash)}),(0,n.jsx)("td",{className:"percent",children:"-"})]}),(0,n.jsxs)("tr",{className:"subtotal-row",children:[(0,n.jsx)("td",{className:"text-left",children:"TOTAL CASH"}),(0,n.jsx)("td",{className:"numeric",children:i(p.totalCash)}),(0,n.jsx)("td",{className:"percent",children:"0.00"}),(0,n.jsx)("td",{className:"numeric",children:i(S.totalCash)}),(0,n.jsx)("td",{className:"percent",children:o(S.totalCash,S.totalSales)})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-left",children:"DEBTORS IN RESIDENCE"}),(0,n.jsx)("td",{className:"numeric ".concat(0!==p.debtors?"negative-val":""),children:i(p.debtors)}),(0,n.jsx)("td",{className:"percent",children:"0.00"}),(0,n.jsx)("td",{className:"numeric ".concat(0!==S.debtors?"negative-val":""),children:i(S.debtors)}),(0,n.jsx)("td",{className:"percent",children:o(S.debtors,S.totalSales)})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-left",children:"T / T LEDGER"}),(0,n.jsx)("td",{className:"numeric",children:i(p.ledg)}),(0,n.jsx)("td",{className:"percent",children:"0.00"}),(0,n.jsx)("td",{className:"numeric",children:i(S.ledg)}),(0,n.jsx)("td",{className:"percent",children:o(S.ledg,S.totalSales)})]})]}),(0,n.jsx)("tfoot",{children:(0,n.jsxs)("tr",{className:"total-row grand-total",children:[(0,n.jsx)("td",{className:"text-left",children:"TOTAL REVENUE"}),(0,n.jsx)("td",{className:"numeric",children:i(p.totalSales)}),(0,n.jsx)("td",{className:"percent",children:i(p.totalCash)}),(0,n.jsx)("td",{className:"numeric",children:i(S.totalSales)}),(0,n.jsx)("td",{className:"percent",children:"100.00"})]})})]})})]})})]})]})}}}]);
//# sourceMappingURL=293.7a71419c.chunk.js.map